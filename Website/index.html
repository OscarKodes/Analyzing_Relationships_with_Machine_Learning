<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Analyzing Relationships with Machine Learning</title>

    <!-- Local CSS -->
    <link rel="stylesheet" href="styles.css">

</head>

<body>

    <div id="main-container">

        <!-- INTRODUCTION SECTION -->

        <div id="title" class="section">

            <h1>Analyzing Relationships with Machine Learning</h1>

            <p class="by-line">
                By <a href="https://www.oscarko.net">Oscar Ko</a>
            </p>

            <div id="cover-img">
                <img src="cover.png" alt="Cover image. Couple sitting on bench.">
                <a id="photo-src" href="https://unsplash.com/photos/wHaQ4XJ9SgY">
                    Photo from Marc A.
                </a>
            </div>

            <p>
                What can we learn about relationships by using machine learning for exploratory analysis?
                <br><br>
                The dataset was taken from a Stanford University survey called, "<a
                    href="https://data.stanford.edu/hcmst2017">How Couples Meet and Stay Together 2017</a>." This
                dataset contains many variables including age, education level, political party, income, usage of dating
                apps, and quality of relationship (as self-rated by the subject). To prepare this data for analysis, I
                renamed and recoded a few features. The specific cleaning steps I took can be seen in this <a
                    href="">Jupyter notebook</a>. During the cleaning process, I also consulted this <a
                    href="https://stacks.stanford.edu/file/druid:vt073cc9067/HCMST_2017_fresh_Codeboodk_v1.1a.pdf">codebook</a>.
            </p>

            <div class="bullet-list">
                For this project, I had a few general research questions:
                <ul>
                    <li>
                        Can any features in this dataset help predict a subject's relationship quality rating?
                    </li>
                    <li>
                        Do couples that meet on dating apps have higher or lower quality relationships?
                    </li>
                    <li>
                        What insights can I derive from using machine learning for exploratory analysis?
                    </li>
                </ul>
            </div>

        </div>


        <!-- CONCLUSION (SHORT) SECTION -->

        <!-- <div id="conclusion-short" class="section">
            <h2>Conclusion (Short)</h2>

            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque hic in facilis atque adipisci omnis
                reprehenderit porro molestias itaque exercitationem, voluptatem qui aut id, quas neque cumque, quisquam
                officiis consequatur.
            </p>

        </div> -->


        <!-- NOTEBOOK RESULTS VIS SECTION -->

        <div id="notebook-vis" class="section">
            <h2>Machine Learning Notebook Results</h2>

            <p>
                I analyzed this dataset by creating four notebooks where I conducted Exploratory Data Analysis,
                Classification,
                Regression,
                and Principal Component Analysis.

                <br><br>
                With the dropdown menu below, you can view visualizations of the results from those four notebooks.

            </p>


            <div id="dropdown-container">
                <select name="" id="dropdown">
                    <option value="1">Top Correlations b/w Features</option>
                    <option value="2">Top Correlations with Relationship Quality</option>
                    <option value="3">Classification Backwards Elimination</option>
                    <option value="4">Regression Backwards Elimination</option>
                    <option value="5">Principal Component Analysis (Unsupervised)</option>
                </select>
            </div>



            <!-- SUPERVISED LEARNING NOTEBOOKS -->

            <div id="supervised-container">

                <!-- VIS DESCRIPTION -->

                <p class="super-text1 n1">
                    This barchart shows the features that had the strongest correlations with each other based on the
                    correlation matrix conducted in the <a
                        href="https://github.com/OscarKodes/Analyzing_Relationships_with_Machine_Learning/blob/main/1%20-%20Exploratory%20Analysis%20.ipynb">
                        EDA notebook</a>.
                </p>
                <p class="super-text1 n2">
                    This barchart shows the features that had the strongest correlations with relationship quality based
                    on the correlation matrix conducted in the <a
                        href="https://github.com/OscarKodes/Analyzing_Relationships_with_Machine_Learning/blob/main/1%20-%20Exploratory%20Analysis%20.ipynb">EDA
                        notebook</a>.
                </p>
                <p class="super-text1 n3">
                    This barchart shows the features left in my Logistic Regression model (for predicting relationship
                    quality) after conducting backwards elimination to remove all features that were more likely to be
                    statistically insignifgant (where their alpha levels were over p = .05). The specific steps I took
                    can be found in the <a
                        href="https://github.com/OscarKodes/Analyzing_Relationships_with_Machine_Learning/blob/main/2%20-%20Classification.ipynb">classification
                        notebook</a>.
                </p>
                <p class="super-text1 n4">
                    This barchart shows the features left in my Linear Regression model (for predicting relationship
                    quality) after conducting backwards elimination to remove all features that were more likely to be
                    statistically insignifgant (where their alpha levels were over p = .05). The specific steps I took
                    can be found in the $<a
                        href="https://github.com/OscarKodes/Analyzing_Relationships_with_Machine_Learning/blob/main/3%20-%20Regression.ipynb">regression
                        notebook</a>.
                </p>


                <!-- DYNAMIC BAR VIS -->

                <div id="bar-vis" class="vis">
                    <h3 class="vis-title n1">Top Correlations between Features</h3>
                    <h3 class="vis-title n2">Top Correlations between Features & Relationship Quality</h3>
                    <h3 class="vis-title n3">Classification Model Feature Coefficients</h3>
                    <h3 class="vis-title n4">Regression Model Feature Coefficients</h3>
                </div>


                <!-- NOTABLE FINDINGS -->

                <div class="super-text2 n1">
                    <p>All the correlations between the feature pairs above had a p-value of 0.</p>
                    <ul>
                        Notable findings:
                        <li>Subjects were more likely to have partners that had similar political leanings.</li>
                        <li>Subjects were more likely to have partners that had similar education levels.</li>
                        <li>The older a subject was when meeting their partner, the larger their age gap tended to be.
                        </li>
                        <li>As subjects were likely to have partners that had similar education levels, their mothers
                            were also likely to have similar education levels.</li>
                        <li>The older a subject was when they met their partner, the shorter it took for them to become
                            a couple.</li>
                    </ul>
                </div>

                <div class="super-text2 n2">
                    <p>All the top correlations with rQual shown had p-values below 0.05.</p>
                    <ul>
                        Notable findings:
                        <li>Income: When couples had higher household incomes, the relationship was more likely to be
                            self-rated as 'good.'</li>
                        <li>Education: When couples had higher education levels, the relationship was more likely to be
                            self-rated as 'good.'</li>
                        <li>Age: When couples were older, the relationship was more likely to be self-rated as 'good.'
                        </li>
                        <li>Children: When the subject's household had more members below the age of 18, the
                            relationship was less likely to be self-rated as 'good.'</li>
                    </ul>
                </div>

                <div class="super-text2 n3">
                    <p>Classification</p>
                    <ul>
                        Notable findings:
                        <li>Income: When couples had higher household incomes, the relationship was more likely to be
                            self-rated as 'good.'</li>
                        <li>Education: When couples had higher education levels, the relationship was more likely to be
                            self-rated as 'good.'</li>
                        <li>Age: When couples were older, the relationship was more likely to be self-rated as 'good.'
                        </li>
                        <li>Sex Frequency: When the couple had sex at least once a week or more, the relationship was
                            more likely to be self-rated as 'good.'</li>
                    </ul>
                </div>

                <div class="super-text2 n4">
                    <p>Regression</p>
                    <ul>
                        Notable findings:
                        <li>Income: When couples had higher household incomes, the relationship was more likely to be
                            self-rated as 'good.'</li>
                        <li>Equal Earnings: When couples earned about the same amount of income, the relationship was
                            more likely to be self-rated as 'good.'</li>
                        <li>School : When couples met in school, the relationship was more likely to be self-rated as
                            'good.'</li>
                        <li>Work Neighbors: When couples met as work neighbors*, the relationship was more likely to be
                            self-rated as 'good.'</li>
                        <li>Age: When couples were older, the relationship was more likely to be self-rated as 'good.'
                        </li>
                        <li>Sex Frequency: When the couple had sex at least once a week or more, the relationship was
                            more likely to be self-rated as 'good.'</li>
                    </ul>
                    <p>* When consulting the codebook, it was unclear what the distinction was between coworkers and
                        work neighbors if any.</p>
                </div>

                <a id="notebook-link" href="">Link
                    to the selected notebook</a>
            </div>



            <!-- UNSUPERVISED LEARNING NOTEBOOK -->

            <div id="unsupervised-container" class="hidden">

                <!-- DESCRIPTION -->

                <p>
                    PCA, Principal Component Analysis, sees an entire dataset as a big data blob. The areas of this blob
                    that
                    stretch out the farthest (the areas with the most variation) are selected as the "principal
                    components." The
                    principal components are sorted from most to least variance captured, so visualizing the first two
                    components as the x and y axes is a good way to investigate a dataset.

                    <br><br>

                    When a principal component is used as an axis on a scatterplot, it can be difficult to interpret
                    because
                    they take in information from many different features. Visualizing these components on a heatmap
                    first might
                    help interpretation.

                    <br><br>

                    (As shown on the heatmap below, not all features of the dataset are present. It is
                    because I selected only the significant features from my classification and regression models to
                    conduct PCA on. Limiting the number of features helps make interpretation of each principal
                    component simpler.)

                </p>



                <!-- HEAT VIS -->

                <div id="heatmap-vis" class="vis">
                    <h3>
                        Components 0 & 1 - Features
                    </h3>
                </div>



                <!-- TEXT INTERPRET -->

                <p>
                    The value of each feature shown is how much contributes to that principal component.

                    <br><br>
                    The grey colored rectangles have values closer to 0, so they don't contribute much to that
                    component. (It doesn't necessarily mean the feature isn't significant. It just means this specific
                    component's captured variance doesn't have anything to do with that feature.)

                    <br><br>
                    A yellow colored feature shows that it is positive, so if the component were represented on an axis,
                    increasing along this axis would represent more of that feature.

                    <br><br>
                    For example, Component 0 has the number of household minors colored in yellow, so as you go forward
                    on this axis, the subjects tend to have more children at home.

                    <br><br>
                    A black colored feature shows that it is negative, so if the component were represented on an axis,
                    increasing along this axis would represent less of that feature.

                    <br><br>
                    For example, Component 0 has the partner's age colored in black, so as you go forward on this axis,
                    the
                    subjects tend to have younger partners.

                    <br><br>
                </p>

                <ul>
                    Notable findings from this heatmap:

                    <h4 class="component-title">Component 0</h4>

                    <div class="bullet-list">

                        <p class="charge-signs">Positive Signs</p>
                        <li>Number of minors in household (strong)</li>
                        <li>Partner's mother education (strong)</li>
                        P
                        <p class="charge-signs">Negative Signs</p>
                        <li>Partner's Age (strong)</li>
                    </div>



                    <h4 class="component-title">Component 1:</h4>

                    <div class="bullet-list">

                        <p class="charge-signs">Positive Signs</p>
                        <li>Household income (strong)</li>
                        <li>Partner's mother education (strong)</li>

                        <p class="charge-signs">Negative Signs</p>
                        <li>Number of minors in household (moderate)</li>
                    </div>

                </ul>


                <!-- SCATTER VIS -->

                <div id="scatter-vis" class="vis">
                    <h3>Relationship Quality: Good vs Not Good</h3>
                </div>


                <!-- TEXT INTERPRET -->

                <p>
                    As shown above, there seems to be yellow and blue dots all over the plot.

                    <br><br>

                    While the areas at the bottom and at the right have less blue dots, it seems there are just less
                    dots there overall.

                    <br><br>

                    Interestingly, the far top and far left areas have few blue dots, but still a decent amount of
                    yellow dots!

                    <br><br>

                    Using the heatmap of component 1 for interpretation, it seems cases at the far top of this
                    scatterplot have subjects that tend to have higher household income, more education, and slightly
                    less children living at home. (The feature here was for the partner's mother's education, but as
                    seen with the correlations in the other notebooks, the education levels of the subject, partner, and
                    their mothers all have some correlation.)

                    <br><br>

                    Using the heatmap of component 0 for interpreation, cases at the far left of this scatterplot have
                    subjects that tend to have more education, less children living at home, and older age. (The feature
                    here was for the partner's age, but as seen with the correlations in the other notebooks, subjects
                    tended to be in relationships with partners of similar age.)

                    <br><br>
                </p>

                <ul>
                    Notable findings:
                    <li>Income: When couples had higher household incomes, the relationship was more likely to be
                        self-rated as 'good.'</li>
                    <li>Education: When couples had higher education levels, the relationship was more likely to be
                        self-rated as 'good.'</li>
                    <li>Age: When couples were older, the relationship was more likely to be self-rated as 'good.'
                    </li>
                    <li>Children: When the subject's household had more members below the age of 18, the
                        relationship was less likely to be self-rated as 'good.'</li>
                </ul>

                <a id="notebook-link">Link to the selected notebook</a>
            </div>


            <a id="return-link" href="#notebook-vis">Return to Dropdown List</a>

        </div>


        <!-- CONCLUSION SECTION -->

        <div id="conclusion-long" class="section">
            <h2>Conclusion (Longer)</h2>

            <p>
                Can any features in this dataset help predict a subject's relationship quality rating?
                <br>
                Yes, it seems the best features in this dataset for predicting relationship quality are age, education,
                income, and number of children living in household.[Add more later]

                As a note, correlation between a predictor variable and the outcome variable does not mean causation or
                even chronological order. For example, couples living together have correlation with relationships rated
                as "good." Maybe a couple is happy together and they decide to live together, but also maybe by living
                together it helped strengthen their bond.
                <br>
                Do couples that meet on dating apps have higher or lower quality relationships?
                <br>
                Whether it was in the correlation matrix or in the machine learning models, having met on dating apps
                did not come up as a significant feature in any of them. So it seems whether or not a couple has met on
                dating apps is not a good predictor for relationship quality.
                <br>
                What insights can I derive from using machine learning for exploratory analysis?
                <br>
                (Aside from the findings of the features above)
                - Subjects were more likely to have partners that had:
                - similar political leanings
                - similar education levels
                - Older subjects have larger age gaps in their relationships
                - The older a subject was when they met their partner, the shorter it took for them to become a couple.
            </p>

            <p>

                A feature may show up as significant in one model, but maybe it wouldn't be so significant in other
                models. In the efforts for exploratory analysis, if a feature appeared as signifigant in multiple models
                surely, there is something worth investigating there.
                <br>
                In the table below I marked which features were important in which models.
                <br>
                * I grouped some features together in the table that had similar concepts. For example subject age and
                partner age both relate to age and they are correlated, so for simplicity I grouped them together in the
                table below as "Age."
                <br>
                * Met as coworkers and met as work neighbors have also been grouped together as they are similar topics.
                Checking the codebook, there does not seem to be any distinction between the two, yet in the
                classification model meeting as coworkers seemed to decrease the probabilty of a "good" rated
                relationship, but in the regression model meeting as "work neighbors" seemed to increase how highly a
                subject rated their relationship. These are contradictory results, but since are workmates related, a
                conclusion we could make is the relationship between being workmates and having a "good" relationship is
                worth investigating further.
            </p>


            <!-- TABLE STARTS BELOW -->

            <div id="table-container">
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Classification</th>
                            <th>Regression</th>
                            <th>Unsupervised</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="highlight">
                            <td># of Household Minors</td>
                            <td></td>
                            <td>✅</td>
                            <td>✅</td>
                            <td>2</td>
                        </tr>
                        <tr class="highlight">
                            <td>Age</td>
                            <td>✅</td>
                            <td></td>
                            <td>✅</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>Earned about the same</td>
                            <td></td>
                            <td>✅</td>
                            <td></td>
                            <td>1</td>
                        </tr>
                        <tr class="highlight">
                            <td>Education</td>
                            <td>✅</td>
                            <td></td>
                            <td>✅</td>
                            <td>2</td>
                        </tr>
                        <tr class="highlight">
                            <td>Household Income</td>
                            <td>✅</td>
                            <td>✅</td>
                            <td>✅</td>
                            <td>3</td>
                        </tr>
                        <tr class="highlight">
                            <td>Living Together</td>
                            <td>✅</td>
                            <td>✅</td>
                            <td></td>
                            <td>2</td>
                        </tr>
                        <tr class="highlight">
                            <td>Met as Coworkers / Work Neighbors</td>
                            <td>✅</td>
                            <td>✅</td>
                            <td></td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>Met in School</td>
                            <td></td>
                            <td>✅</td>
                            <td></td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>Race</td>
                            <td></td>
                            <td>✅</td>
                            <td></td>
                            <td>1</td>
                        </tr>
                        <tr class="highlight">
                            <td>Sex Frequency</td>
                            <td>✅</td>
                            <td>✅</td>
                            <td></td>
                            <td>2</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- TABLE ENDS ABOVE -->


            <!-- CLOSING WORDS -->

            <p>
                It seems the general concepts that appeared in more than one model were number of household minors, age,
                education, income, living together, workmates, and sex frequency.

                <br><br>

                The relationship between these concepts and relationship quality might be worth investigating further
                with future studies and more relationship data.

                <br><br>

                This analysis is done on just one dataset of couples. Relationships in the real world might be very
                different. Just because a couple is of certain ages, races, education levels, or incomes it neither
                means their relationship is doomed to fail, nor destined to succeed.

                <br><br>
                "Love is unpredictable and it's frustrating and it's tragic and it's beautiful.” - Taylor Swift

                <br><br>
                "I've learned that you can't predict or plan for it. For someone like me who is obsessed with
                organization and planning, I love the idea that love is the one exception to that. Love is the one wild
                card." - Taylor Swift

                <br><br>
                "People fall in love without reason, without even wanting it. You can't predict it. That's love." -
                Haruki Murakami


            </p>


        </div>


        <div id="bottom-link">
            <a href="https://www.oscarko.net">www.OscarKo.net</a>
        </div>






        <!-- Tippy Popper CDN -->
        <script src="https://unpkg.com/popper.js@1"></script>
        <script src="https://unpkg.com/tippy.js@4"></script>

        <!-- D3.js CDN -->
        <script src="https://d3js.org/d3.v7.min.js"></script>

        <!-- Javascript -->
        <script type="module" src="main-bar.js"></script>
        <script type="module" src="main-heatmap.js"></script>
        <script type="module" src="main-scatter.js"></script>
        <script type="module" src="notebook-switcher.js"></script>
        <!-- <script type="module" src="tooltip.js"></script> -->

    </div>

</body>

</html>